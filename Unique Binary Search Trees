class Solution:
    def numTrees(self, n: int) -> int:
        dp = [0] * (n + 1)

        def bst(nodes):
            if nodes == 0 or nodes == 1:
                return 1

            if dp[nodes] != 0:
                return dp[nodes]

            total = 0
            for root in range(1, nodes + 1):
                left = bst(root - 1)
                right = bst(nodes - root)
                total += left * right

            dp[nodes] = total
            return total

        return bst(n)
